<html>

<head>
  <title>Tic Tac Toe </title>
  <style>
		.movementButton {
			width: 100%;
			height: 20vh;
		}

		td {
			width: 30%
		}

		.center {
			width: 80%;
			margin: 0 auto;
		}
	</style>
</head>

<body onload="newGame()">
	<div class="center">
		<h1>Tic Tac Toe Testing Front-end</h1>
		GameId: <span id="gameId"></span>,
		First Player: <span id="firstPlayer"></span><br>
		<br>
		<hr>
	</div>	

	<table class="center">
		<tbody>
			<tr>
				<td><button class="movementButton" data-x="0", data-y="2" onclick="doMovement(this)"></button></td>
				<td><button class="movementButton" data-x="1", data-y="2" onclick="doMovement(this)"></button></td>
				<td><button class="movementButton" data-x="2", data-y="2" onclick="doMovement(this)"></button></td>
			</tr>
			<tr>
				<td><button class="movementButton" data-x="0", data-y="1" onclick="doMovement(this)"></button></td>
				<td><button class="movementButton" data-x="1", data-y="1" onclick="doMovement(this)"></button></td>
				<td><button class="movementButton" data-x="2", data-y="1" onclick="doMovement(this)"></button></td>
			</tr>
			<tr>
				<td><button class="movementButton" data-x="0", data-y="0" onclick="doMovement(this)"></button></td>
				<td><button class="movementButton" data-x="1", data-y="0" onclick="doMovement(this)"></button></td>
				<td><button class="movementButton" data-x="2", data-y="0" onclick="doMovement(this)"></button></td>			</tr>
		</tbody>
	</table>

	<script src="/jquery-3.4.1.min.js"></script>
	<script>
		$(function() {
			$(".movementButton").each(function() {
				$(this).html($(this).attr("data-x") + ', ' + $(this).attr("data-y"));
			});
		});

		function newGame() {
			$.post("/game", function(data) {
				window.game = data;
				window.currentPlayer = data.firstPlayer;

				$("#gameId").html(data.id);
				$("#firstPlayer").html(data.firstPlayer);
			});
		}

		function doMovement(elm) {
			var x = $(elm).attr("data-x");
			var y = $(elm).attr("data-y");

			$(elm).html(currentPlayer);
			
			if ( currentPlayer == 'X' ) currentPlayer = 'O'
			else currentPlayer = 'X';
		}
	</script>


</body>
</html>
